const dropDowns=document.querySelectorAll("select.sqDropdown");function toggleDropdown(a,b){b.classList.remove("hide");b.classList.add("show")}function forceMouseOut(c,d){d.classList.remove("show");d.classList.add("hide");c.blur()}function setSelectValue(e){let f=null;if(e.target.dataset.targetid.startsWith("#",0))f=document.querySelector(e.target.dataset.targetid);else f=document.querySelector('select[data-targetindex="'+e.target.dataset.targetindex+'"]');f.selectedIndex=parseInt(e.target.dataset.idx);for(const h of f.parentNode.children[f.parentNode.children.length-1].children[2].children)h.removeAttribute("selected");f.parentNode.children[f.parentNode.children.length-1].children[2].children[f.selectedIndex].setAttribute("selected","selected");const g=new Event("change");f.dispatchEvent(g);if(f.dataset.nosettitle===undefined){for(const i of e.target.parentNode.parentNode.children){if(i.nodeName==="INPUT")i.value=f.options[f.selectedIndex].innerText}}}function isInTargetNode(j,k,l){if(l--===0){return false}if(j===null){return false}if(j===k){return true}return isInTargetNode(j.parentNode,k,l)}function searchValue(m,n){const o=m.value.trim().toLowerCase();if(o.length===0){for(const q of n.children){q.classList.remove("hidden");q.classList.remove("nodisplay")}return}let p=0;for(const r of n.children){if(r.getAttribute("value").toLowerCase().indexOf(o)!==-1||r.textContent.toLowerCase().indexOf(o)!==-1){r.classList.remove("hidden");r.classList.remove("nodisplay");p++}else{r.classList.add("hidden");r.classList.add("nodisplay")}}if(p===0){for(const s of n.children){s.classList.remove("hidden");s.classList.remove("nodisplay")}}}let targetIndex=0;let zIndex=99999;for(const t of dropDowns){--zIndex;const u=document.createElement("div");u.classList.add("sqDropDown");u.style.zIndex=zIndex;t.dataset.targetindex=targetIndex;const v=document.createElement("div");v.classList.add("dropDownList");v.classList.add("hide");const w=t.getAttribute("multiple");if(w!==null){u.classList.add("multipleSelect");if(t.getAttribute("name")!==null){t.setAttribute("name",t.getAttribute("name").replace(/[\[\]]/g,"")+"[]")}}let x=0;for(const A of t.children){const B=document.createElement("span");for(const C of A.getAttributeNames()){B.setAttribute(C,A.getAttribute(C))}if(w!==null){const D=document.createElement("label");const E=document.createElement("input");E.setAttribute("type","checkbox");E.setAttribute("tabindex","-1");D.appendChild(E);D.appendChild(document.createTextNode(A.innerText));if(A.value==="-1"){if(A.getAttribute("selected")!==null){E.checked=true;A.parentNode.parentNode.setAttribute("selected","selected")}E.addEventListener("click",function(F){const G=document.querySelectorAll('input[type="checkbox"]');const H=F.target.parentNode.parentNode;let I=null;const J=[];for(const L of G){if(L.parentNode.parentNode.parentNode===F.target.parentNode.parentNode.parentNode){if(L.parentNode.parentNode.getAttribute("value")==="-1"){L.checked=true;L.parentNode.parentNode.setAttribute("selected","selected");J.push(0)}else{L.parentNode.parentNode.removeAttribute("selected");L.checked=false}}}if(H.dataset.targetid.startsWith("#",0))I=document.querySelector(H.dataset.targetid);else I=document.querySelector('select[data-targetindex="'+H.dataset.targetindex+'"]');for(const M of I.options){M.removeAttribute("selected")}for(const N of J){I.options[N].setAttribute("selected","selected")}const K=new Event("change");I.dispatchEvent(K);F.target.parentNode.parentNode.parentNode.scrollTo(0,0)})}else{if(A.getAttribute("selected")!==null){E.checked=true;A.parentNode.parentNode.setAttribute("selected","selected")}E.addEventListener("click",function(O){const P=document.querySelectorAll('input[type="checkbox"]');for(const W of P){if(W.parentNode.parentNode.parentNode===O.target.parentNode.parentNode.parentNode){if(W.parentNode.parentNode.getAttribute("value")==="-1"){W.checked=false;W.parentNode.parentNode.removeAttribute("selected")}}}const Q=O.layerY;const R=O.target.parentNode.parentNode;const S=[];const T=[];for(const X of P){if(X.parentNode.parentNode.parentNode===O.target.parentNode.parentNode.parentNode){X.parentNode.parentNode.removeAttribute("selected");if(X.parentNode.parentNode.getAttribute("value")==="-1"){X.checked=false}else if(X.checked===true){X.parentNode.parentNode.setAttribute("selected","selected");S.push(parseInt(X.parentNode.parentNode.dataset.idx))}T.push(X)}}let U=null;if(R.dataset.targetid.startsWith("#",0)){U=document.querySelector(R.dataset.targetid)}else{U=document.querySelector('select[data-targetindex="'+R.dataset.targetindex+'"]')}for(const Y of U.options){Y.removeAttribute("selected")}for(const Z of S){U.options[Z].setAttribute("selected","selected")}if(S.length===0){T[0].checked=true;T[0].parentNode.parentNode.setAttribute("selected","selected")}const V=new Event("change");U.dispatchEvent(V);O.target.parentNode.parentNode.parentNode.scrollTo(0,Q-60)})}D.addEventListener("focus",function(){toggleDropdown(z,v)});D.addEventListener("blur",function(){forceMouseOut(z,v)});D.addEventListener("keypress",function($){if($.keyCode===13||$.charCode===32){$.target.children[0].click()}});D.setAttribute("tabindex","0");B.setAttribute("tabindex","-1");B.appendChild(D)}else{B.appendChild(document.createTextNode(A.innerText));B.setAttribute("tabindex","0");B.addEventListener("keypress",function(_){if(_.keyCode===13||_.charCode===32){_.target.click()}})}B.addEventListener("focus",function(){toggleDropdown(z,v)});B.addEventListener("blur",function(){forceMouseOut(z,v)});B.addEventListener("click",function(){toggleDropdown(z,v)});v.appendChild(B);B.dataset.idx=x++;B.dataset.targetindex=targetIndex;if(t.getAttribute("id")!==null){B.dataset.targetid="#"+t.getAttribute("id")}else if(t.className!==""){B.dataset.targetid=targetIndex}if(w===null){B.addEventListener("click",setSelectValue)}}const y=document.createElement("span");const z=document.createElement("input");for(const aa of t.getAttributeNames()){if(aa==="name"){z.setAttribute(aa,t.getAttribute(aa).toString().replace(/[\[\]]/g,"")+"_input");continue}z.setAttribute(aa,t.getAttribute(aa))}z.className="";z.removeAttribute("id");z.removeAttribute("required");z.removeAttribute("type");z.classList.remove("dropdown-toggle");z.classList.remove("dropdown");if(t.selectedOptions.length!==0){if(t.selectedOptions.length!==0){z.setAttribute("placeholder",t.selectedOptions[0].innerText)}else{z.setAttribute("placeholder",t.options[0].innerText)}z.value=""}else{z.value="";z.setAttribute("placeholder",t.options[0].innerText)}v.setAttribute("tabindex","-1");z.setAttribute("tabindex","0");z.addEventListener("focus",function(){toggleDropdown(z,v)});z.addEventListener("keyup",function(){searchValue(z,v)});y.addEventListener("click",function(){toggleDropdown(z,v)});z.addEventListener("blur",function(ba){if(!isInTargetNode(ba.relatedTarget,u,8))forceMouseOut(z,v)});z.addEventListener("mouseout",function(ca){if(!isInTargetNode(ca.relatedTarget,u,8))forceMouseOut(z,v)});v.addEventListener("mouseout",function(da){if(!isInTargetNode(da.relatedTarget,u,8))forceMouseOut(z,v)});y.addEventListener("mouseout",function(ea){if(!isInTargetNode(ea.relatedTarget,u,8))forceMouseOut(z,v)});u.appendChild(y);u.appendChild(z);u.appendChild(v);t.parentNode.append(u);t.classList.add("hidden");t.classList.add("nodisplay");targetIndex++}
