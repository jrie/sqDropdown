const dropDowns=document.querySelectorAll("select.sqDropdown");function toggleDropdown(t,e){e.classList.remove("hide"),e.classList.add("show")}function forceMouseOut(t,e){e.classList.remove("show"),e.classList.add("hide"),t.blur()}function setSelectValue(t){let e=null;t.target.dataset.targetid.startsWith("#",0)?e=document.querySelector(t.target.dataset.targetid):e=document.querySelector('select[data-targetindex="'+t.target.dataset.targetindex+'"]'),e.selectedIndex=parseInt(t.target.dataset.idx);for(const u of e.parentNode.children[e.parentNode.children.length-1].children[2].children)u.removeAttribute("selected");e.parentNode.children[e.parentNode.children.length-1].children[2].children[e.selectedIndex].setAttribute("selected","selected");const d=new Event("change");if(e.dispatchEvent(d),e.dataset.nosettitle===void 0)for(const u of t.target.parentNode.parentNode.children)u.nodeName==="INPUT"&&(u.value=e.options[e.selectedIndex].innerText)}function isInTargetNode(t,e,d){return d--===0||t===null?!1:t===e?!0:isInTargetNode(t.parentNode,e,d)}function searchValue(t,e){const d=t.value.trim().toLowerCase();if(d.length===0){for(const i of e.children)i.classList.remove("hidden"),i.classList.remove("nodisplay");return}let u=0;for(const i of e.children)i.getAttribute("value").toLowerCase().indexOf(d)!==-1||i.textContent.toLowerCase().indexOf(d)!==-1?(i.classList.remove("hidden"),i.classList.remove("nodisplay"),u++):(i.classList.add("hidden"),i.classList.add("nodisplay"));if(u===0)for(const i of e.children)i.classList.remove("hidden"),i.classList.remove("nodisplay")}let targetIndex=0,zIndex=99999;for(const t of dropDowns){--zIndex;const e=document.createElement("div");e.classList.add("sqDropDown"),e.style.zIndex=zIndex,t.dataset.targetindex=targetIndex;const d=document.createElement("div");d.classList.add("dropDownList"),d.classList.add("hide");const u=t.getAttribute("multiple");u!==null&&(e.classList.add("multipleSelect"),t.getAttribute("name")!==null&&t.setAttribute("name",t.getAttribute("name").replace(/[\[\]]/g,"")+"[]"));let i=0;for(const r of t.children){const s=document.createElement("span");for(const c of r.getAttributeNames())s.setAttribute(c,r.getAttribute(c));if(u!==null){const c=document.createElement("label"),f=document.createElement("input");f.setAttribute("type","checkbox"),f.setAttribute("tabindex","-1"),c.appendChild(f),c.appendChild(document.createTextNode(r.innerText)),r.value==="-1"?(r.getAttribute("selected")!==null&&(f.checked=!0,r.parentNode.parentNode.setAttribute("selected","selected")),f.addEventListener("click",function(l){const N=document.querySelectorAll('input[type="checkbox"]'),g=l.target.parentNode.parentNode;let p=null;const h=[];for(const a of N)a.parentNode.parentNode.parentNode===l.target.parentNode.parentNode.parentNode&&(a.parentNode.parentNode.getAttribute("value")==="-1"?(a.checked=!0,a.parentNode.parentNode.setAttribute("selected","selected"),h.push(0)):(a.parentNode.parentNode.removeAttribute("selected"),a.checked=!1));g.dataset.targetid.startsWith("#",0)?p=document.querySelector(g.dataset.targetid):p=document.querySelector('select[data-targetindex="'+g.dataset.targetindex+'"]');for(const a of p.options)a.removeAttribute("selected");for(const a of h)p.options[a].setAttribute("selected","selected");const b=new Event("change");p.dispatchEvent(b),l.target.parentNode.parentNode.parentNode.scrollTo(0,0)})):(r.getAttribute("selected")!==null&&(f.checked=!0,r.parentNode.parentNode.setAttribute("selected","selected")),f.addEventListener("click",function(l){const N=document.querySelectorAll('input[type="checkbox"]');for(const o of N)o.parentNode.parentNode.parentNode===l.target.parentNode.parentNode.parentNode&&o.parentNode.parentNode.getAttribute("value")==="-1"&&(o.checked=!1,o.parentNode.parentNode.removeAttribute("selected"));const g=l.layerY,p=l.target.parentNode.parentNode,h=[],b=[];for(const o of N)o.parentNode.parentNode.parentNode===l.target.parentNode.parentNode.parentNode&&(o.parentNode.parentNode.removeAttribute("selected"),o.parentNode.parentNode.getAttribute("value")==="-1"?o.checked=!1:o.checked===!0&&(o.parentNode.parentNode.setAttribute("selected","selected"),h.push(parseInt(o.parentNode.parentNode.dataset.idx))),b.push(o));let a=null;p.dataset.targetid.startsWith("#",0)?a=document.querySelector(p.dataset.targetid):a=document.querySelector('select[data-targetindex="'+p.dataset.targetindex+'"]');for(const o of a.options)o.removeAttribute("selected");for(const o of h)a.options[o].setAttribute("selected","selected");h.length===0&&(b[0].checked=!0,b[0].parentNode.parentNode.setAttribute("selected","selected"));const A=new Event("change");a.dispatchEvent(A),l.target.parentNode.parentNode.parentNode.scrollTo(0,g-60)})),c.addEventListener("focus",function(){toggleDropdown(n,d)}),c.addEventListener("blur",function(){forceMouseOut(n,d)}),c.addEventListener("keypress",function(l){(l.keyCode===13||l.charCode===32)&&l.target.children[0].click()}),c.setAttribute("tabindex","0"),s.setAttribute("tabindex","-1"),s.appendChild(c)}else s.appendChild(document.createTextNode(r.innerText)),s.setAttribute("tabindex","0"),s.addEventListener("keypress",function(c){(c.keyCode===13||c.charCode===32)&&c.target.click()});s.addEventListener("focus",function(){toggleDropdown(n,d)}),s.addEventListener("blur",function(){forceMouseOut(n,d)}),s.addEventListener("click",function(){toggleDropdown(n,d)}),d.appendChild(s),s.dataset.idx=i++,s.dataset.targetindex=targetIndex,t.getAttribute("id")!==null?s.dataset.targetid="#"+t.getAttribute("id"):t.className!==""&&(s.dataset.targetid=targetIndex),u===null&&s.addEventListener("click",setSelectValue)}const m=document.createElement("span"),n=document.createElement("input");for(const r of t.getAttributeNames()){if(r==="name"){n.setAttribute(r,t.getAttribute(r).toString().replace(/[\[\]]/g,"")+"_input");continue}n.setAttribute(r,t.getAttribute(r))}n.className="",n.removeAttribute("id"),n.removeAttribute("required"),n.removeAttribute("type"),n.classList.remove("dropdown-toggle"),n.classList.remove("dropdown"),t.selectedOptions.length!==0?(t.selectedOptions.length!==0?n.setAttribute("placeholder",t.selectedOptions[0].innerText):n.setAttribute("placeholder",t.options[0].innerText),n.value=""):(n.value="",n.setAttribute("placeholder",t.options[0].innerText)),d.setAttribute("tabindex","-1"),n.setAttribute("tabindex","0"),n.addEventListener("focus",function(){toggleDropdown(n,d)}),n.addEventListener("keyup",function(){searchValue(n,d)}),m.addEventListener("click",function(){toggleDropdown(n,d)}),n.addEventListener("blur",function(r){isInTargetNode(r.relatedTarget,e,8)||forceMouseOut(n,d)}),n.addEventListener("mouseout",function(r){isInTargetNode(r.relatedTarget,e,8)||forceMouseOut(n,d)}),d.addEventListener("mouseout",function(r){isInTargetNode(r.relatedTarget,e,8)||forceMouseOut(n,d)}),m.addEventListener("mouseout",function(r){isInTargetNode(r.relatedTarget,e,8)||forceMouseOut(n,d)}),e.appendChild(m),e.appendChild(n),e.appendChild(d),t.parentNode.append(e),t.classList.add("hidden"),t.classList.add("nodisplay"),targetIndex++}
